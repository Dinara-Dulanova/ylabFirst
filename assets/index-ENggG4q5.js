(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function s(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(e){if(e.ep)return;e.ep=!0;const r=s(e);fetch(e.href,r)}})();class l{constructor(t,s){this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._form=s,this._inputsList=this._form.querySelectorAll(this._inputSelector),this._submitButtonElement=this._form.querySelector(this._submitButtonSelector)}_checkInputValidity(t){const s=t.validity.valid,o=this._form.querySelector(`#${t.name}-error`);s?this._hideError(t,o):this._showError(t,o)}_toggleButtonState(t){t?(this._submitButtonElement.disabled=!1,this._submitButtonElement.classList.remove(this._inactiveButtonClass)):(this._submitButtonElement.disabled="disabled",this._submitButtonElement.classList.add(this._inactiveButtonClass))}_setEventListener(){this._toggleButtonState(this._form.checkValidity()),[...this._inputsList].forEach(t=>{t.addEventListener("input",()=>{this._toggleButtonState(this._form.checkValidity()),this._checkInputValidity(t)})})}enableValidation(){this._form.addEventListener("submit",t=>t.preventDefault()),this._setEventListener(),this._form.addEventListener("reset",()=>{this._toggleButtonState(!1)})}}class c{constructor(t){this._submitFormFunction=t,this._form=document.querySelector(".auth__form"),this._inputList=this._form.querySelectorAll(".auth__input"),this._submitButton=this._form.querySelector(".auth__button")}_getInputValues(){const t={};return this._inputList.forEach(s=>t[s.name]=s.value),t}setEventListeners(){this._form.addEventListener("submit",t=>{t.preventDefault(),this._submitFormFunction(this._getInputValues())})}renderLoading(t){this._submitButton.textContent=t}}class h{constructor(t,s){this._url=t,this._headers=s}_getResponse(t){return t.ok?t.json():Promise.reject(`Ошибка ${t.status} ${t.statusText}`)}authentication(t,s){return fetch(`${this._url}/${t}/${s}/`,{headers:this._headers,method:"GET"}).then(o=>this._getResponse(o))}}const _={inputSelector:".auth__input",submitButtonSelector:".auth__button",inactiveButtonClass:"auth__button_disabled",inputErrorClass:"auth__input_type_error"},a=document.querySelector(".auth__form");function d(){document.querySelector(".auth__error").classList.add("show")}function m(){document.querySelector(".auth__error").classList.remove("show")}const f=new h("https://example.com",{authorization:"bybjygvbjgj","Content-Type":"application/json"}),p=new l(_,a,()=>{console.log("hi")});p.enableValidation();const u=new c(i=>{u.renderLoading("Загрузка..."),f.authentication(i.email,i.password).then(()=>{alert("succes"),m(),a.reset()}).catch(()=>{d()}).finally(()=>{u.renderLoading("Войти")})});u.setEventListeners();
